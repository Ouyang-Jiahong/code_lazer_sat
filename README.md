# 空间目标探测任务规划与评估任务书

## 运行环境
本项目的运行环境为 Python 3.13.2。请确保您已经安装了该版本的 Python，再按照上述说明安装所需的库。

## 相关库安装

请使用以下命令安装所需的 Python 库。将 `XXX` 替换为下方列出的库名称：

```bash
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple XXX
```

需要安装的库包括：

- `numpy`
- `pandas`
- `pulp`
- `openpyxl`
- `deap`
- `poliastro`

> **注意：** 若在安装过程中遇到网络限制问题（如大量下载行为被拦截），建议更换网络环境或尝试其他镜像源。

## 代码文件说明
### main.py
该文件实现了空间目标探测任务的规划求解，使用 `pulp` 库构建线性规划模型，包含数据导入、预处理、求解器参数设置、模型构建和求解等步骤。

### data.py
负责数据加载和预处理，从 Excel 文件和 MATLAB 数据文件中读取测站参数、任务需求、可见弧段等数据，并构建雷达 - 目标可见性字典。

### app.py
使用 Dash 框架开发的可视化工具，提供一个前端页面，用户可以通过下拉框选择目标编号，查看该目标的可见弧段时序图。

## 任务场景描述

本任务旨在利用一组雷达设备对给定的空间目标进行探测任务规划与评估。具体包括：

- 使用多种类型的雷达进行探测，包括**相控阵雷达**和**机械跟踪雷达**。
- 雷达参数详见 `sensorData.xlsx` 文件，包含部署位置、探测能力等信息。
- 每个空间目标的轨道参数及其探测需求（如所需测站数量、最小探测次数、最短探测时间等）详见 `requireData.xlsx` 文件。
- 探测时间段为：**2021年10月14日 4时0分0秒 至 2021年10月15日 4时0分0秒（UTCG时间）**

### 输入数据

- 雷达配置信息
- 空间目标轨道数据
- 探测任务需求

### 输出结果

输出应包含每部雷达在指定时间段内对各目标的详细探测安排，包括：

- 探测起止时间
- 是否执行探测任务
- 探测顺序安排

# 数学模型

## 1. 决策变量

定义如下布尔型决策变量：

$$
x_{r,s,a} = 
\begin{cases}
1, & \text{若雷达 } r \text{ 在其第 } a \text{ 个可见弧段对目标 } s \text{ 进行观测} \\
0, & \text{否则}
\end{cases}, \quad \forall r \in R,\ \forall s \in S,\ \forall a \in A_{r,s}
$$

其中：

* $R$：雷达集合
* $S$：目标集合
* $A_{r,s}$：雷达 $r$ 对目标 $s$ 可观测的弧段索引集合

## 2. 目标函数

目标是**最大化所有被“有效观测”的目标的加权总数**：

$$
\max J = \sum_{s \in S} w_s \cdot y_s
$$

其中：

* $w_s$：目标 $s$ 的权重（优先级）
* $y_s$：二值变量，表示目标 $s$ 是否被有效观测：

$$
y_s = 
\begin{cases}
1, & \text{若目标 } s \text{ 至少被 } M_s \text{ 个不同雷达有效观测} \\
0, & \text{否则}
\end{cases}
$$

> 注：一次“有效观测”指某雷达对某目标的某弧段观测时长不小于阈值 $T_s^{\min}$。

## 3. 约束条件

### （1）目标有效观测数量约束

每个目标必须被**不少于 $M_s$ 个不同雷达**有效观测，才能视为“有效目标”：

$$
\sum_{r \in R} \delta_{r,s} \geq M_s \cdot y_s, \quad \forall s \in S
$$

其中，$\delta_{r,s}$ 表示雷达 $r$ 是否对目标 $s$ 至少完成了一次有效观测：

$$
\delta_{r,s} = 
\begin{cases}
1, & \sum_{a \in A_{r,s}} t_{r,s,a} \cdot x_{r,s,a} \geq T_s^{\min} \\
0, & \text{否则}
\end{cases}
$$

* $t_{r,s,a}$：雷达 $r$ 对目标 $s$ 在弧段 $a$ 上的观测时长

### （2）目标有效观测弧段数量约束

每个目标还需被观测到**至少 $M_a$ 个有效弧段**，即具有足够的观测覆盖度：

定义变量：

$$
z_{s,a} = 
\begin{cases}
1, & \text{存在某雷达在弧段 } a \text{ 上对目标 } s \text{ 有效观测} \\
0, & \text{否则}
\end{cases}, \quad \forall s \in S,\ \forall a \in A_s
$$

* $A_s = \bigcup_{r \in R} A_{r,s}$：所有雷达对目标 $s$ 可见的弧段集合

约束如下：

* 至少有 $M_a$ 个有效弧段被观测：

$$
\sum_{a \in A_s} z_{s,a} \geq M_a \cdot y_s, \quad \forall s \in S
$$

* 有效弧段的定义与观测决策变量的逻辑关系：

$$
z_{s,a} \geq x_{r,s,a}, \quad \forall r \in R,\ \forall s \in S,\ \forall a \in A_{r,s}
$$

* 变量类型约束：

$$
z_{s,a} \in \{0,1\}, \quad \forall s \in S,\ \forall a \in A_s
$$

---

### （3）雷达观测容量约束

每部雷达在任一时刻最多只能同时观测 $C_r$ 个目标。考虑离散时间索引 $t \in T$，有：

$$
\sum_{s \in S} \sum_{a \in A_{r,s}^t} x_{r,s,a} \leq C_r, \quad \forall r \in R,\ \forall t \in T
$$

其中：

* $A_{r,s}^t$：时刻 $t$ 时，雷达 $r$ 可用于观测目标 $s$ 的弧段集合
* $T$：时间步长集合

---

以上模型描述了一个带有可见性窗口和有效时长判据的**多雷达-多目标分配问题**，旨在在资源受限下最大化目标的有效观测收益。若需继续扩展其他约束（如任务优先级冲突、观测切换时间等），可在此基础上追加建模。


